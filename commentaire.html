<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Commentaire</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        .cacher {
            display: none;
        }
    </style>
</head>

<body>

    <form id="formulaire" class="mt-5 rounder-3 w-50 mx-auto bg-info px-3 pt-2">
        <div class="text-center fw-bolder mb-3 text-light fs-2 ">Commentaire</div>
        <div class="row">
            <input type="text" id="input" class="form-control w-75 mx-auto  mb-3" />
        </div>
        <div class="row">
            <input id="btn" type="button" value="Publier" class="w-25 mx-auto btn btn-light" onclick="commenter()" />
        </div>
        <!-- Bloc qui va afficher les commentaires -->
        <div id="commentaires" class="mx-auto w-75 mt-2 alert alert-primary">


        </div>
        <br>
        <!-- Bouton qui va afficher ou cacher les commentaires -->
        <input class="btn btn-light btn-sm mb-3 cacher" type="button" onclick="changer()" value="Voir plus" id="change">
    </form>

    <script>
        let input = document.getElementById("input");
        let btn = document.getElementById("btn");
        let commentaires = document.getElementById("commentaires");

        // Fonction permettant de verifier les commentaires depassent 2 
        // et affiche un bouton "voir plus" en consequence
        // La fonction se charge aussi de cacher les commentaires au dessus de 2
        function verifie() {
            let changer = document.getElementById("change");
            if (document.getElementsByClassName('commentaire').length > 2)
                changer.setAttribute("class", "btn btn-light btn-sm mb-3");
            let tableauCommentaire = document.getElementsByClassName('commentaire');
            if (changer.value == "Voir plus") {
                for (let i = 0; i < tableauCommentaire.length; i++) {
                    if (i >= 2)
                        tableauCommentaire[i].setAttribute('class', 'commentaire border border-1 mb-1 rounded-1 border-black text-center cacher');
                }
            }
        }

        // Cette permet de creer un commentaire dans le HTML
        function commenter() {
            let enfant = document.createElement("div");
            enfant.setAttribute('class', 'commentaire border border-1 mb-1 rounded-1 border-black text-center');
            enfant.innerHTML = input.value;
            commentaires.appendChild(enfant);
            input.value = "";
            verifie();
        }

        // Cette fonction permet de changer le bouton voir plus en voir moins et vice versa
        // Afficher les commentaires au dessus de 2
        // Cacher les commentaires au dessus de 2
        function changer() {
            let changer = document.getElementById("change");

            if (changer.value == "Voir plus") {
                let tableauCommentaire = document.getElementsByClassName('commentaire');
                if (tableauCommentaire[2].getAttribute("class") == "commentaire border border-1 mb-1 rounded-1 border-black text-center cacher") {
                    changer.value = "Voir moins";
                    for (let i = 0; i < tableauCommentaire.length; i++) {
                        tableauCommentaire[i].setAttribute("class", "commentaire border border-1 mb-1 rounded-1 border-black text-center");
                    }
                } else {
                    changer.value = "Voir moins";
                    for (let i = 0; i < tableauCommentaire.length; i++) {
                        tableauCommentaire[i].setAttribute("class", "commentaire border border-1 mb-1 rounded-1 border-black text-center");
                    }
                }
            }
            else {
                let tableauCommentaire = document.getElementsByClassName('commentaire');
                changer.value = "Voir plus";

                for (let i = 0; i < tableauCommentaire.length; i++) {
                    if (i >= 2)
                        tableauCommentaire[i].setAttribute("class", "commentaire border border-1 mb-1 rounded-1 border-black text-center cacher");
                }
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</body>

</html>